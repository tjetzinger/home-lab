# Nginx SSH Proxy LoadBalancer Service
# Namespace: dev
#
# Story: 11.4 - Configure Nginx SSH Proxy with Custom Domains
# FR: FR59 - Nginx proxy routes to dev containers
# FR: FR61 - Connect VS Code via Nginx proxy
#
# Purpose: External LoadBalancer for SSH access to dev containers via nginx proxy
# Ports: 2222 (Belego), 2223 (Pilates), 2224 (AI-Dev)
# Note: Uses MetalLB to get external IP
---
apiVersion: v1
kind: Service
metadata:
  name: nginx-proxy-ssh
  namespace: dev
  labels:
    app.kubernetes.io/name: nginx
    app.kubernetes.io/instance: nginx-proxy-ssh
    app.kubernetes.io/component: ssh-proxy
    app.kubernetes.io/part-of: home-lab
    app.kubernetes.io/managed-by: kubectl
spec:
  type: LoadBalancer
  ports:
  - port: 2222
    targetPort: 2222
    protocol: TCP
    name: ssh-belego
  - port: 2223
    targetPort: 2223
    protocol: TCP
    name: ssh-pilates
  - port: 2224
    targetPort: 2224
    protocol: TCP
    name: ssh-ai-dev
  selector:
    app.kubernetes.io/name: nginx
    app.kubernetes.io/instance: nginx-proxy
